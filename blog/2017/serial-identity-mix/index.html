<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p><figure data-shortcode="caption" id="attachment_2105" aria-describedby="caption-attachment-2105" style="width: 310px" class="wp-caption alignright"><a href="https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg" rel="external nofollow noopener" target="_blank"><img loading="lazy" data-attachment-id="2105" data-permalink="https://pgolub.wordpress.com/2017/11/06/serial-identity-mix/pawn-2430046_1280/" data-orig-file="https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg" data-orig-size="1280,894" data-comments-opened="1" data-image-meta='{"aperture":"16","credit":"","camera":"Canon EOS 70D","caption":"","created_timestamp":"0","copyright":"","focal_length":"200","iso":"160","shutter_speed":"0.005","title":"","orientation":"0"}' data-image-title="Serial-identity" data-image-description="" data-image-caption="&lt;p&gt;Serial-identity&lt;/p&gt; " data-medium-file="https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg?w=300" data-large-file="https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg?w=1024" src="https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg?w=300&amp;h=210" alt="Serial-identity" width="300" height="210" class="size-medium wp-image-2105" srcset="https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg?w=300 300w, https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg?w=600 600w, https://pgolub.wordpress.com/wp-content/uploads/2017/11/pawn-2430046_1280.jpg?w=150 150w" sizes="(max-width: 300px) 100vw, 300px"></a><figcaption id="caption-attachment-2105" class="wp-caption-text">Serial-identity</figcaption></figure>As you probably know <a href="https://wiki.postgresql.org/wiki/New_in_postgres_10" rel="noopener" target="_blank">PostgreSQL 10</a> introduced IDENTITY columns. They are pretty much like serial columns from the first sight. To learn about differences one may refer to the perfect <a href="https://blog.2ndquadrant.com/postgresql-10-identity-columns/" rel="noopener" target="_blank">blog post</a> by Peter Eisentraut.</p> <p>So I was wondering what if I mix some serial with some identity. So I executed such simple query:</p> <p><code>CREATE TABLE foo(<br> id SERIAL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY<br> );</code></p> <p>Of course, I got an error:</p> <p><code>ERROR: both default and identity specified for column "id" of table "foo"<br> SQL state: 42601</code></p> <p>“SQL state: 42601” stands for a syntax error. But the interesting thing is that SERIAL, as you know, converted to <em>CREATE SEQUENCE</em> and <em>SET DEFAULT</em>.</p> <p>So now I know what exactly the reason of error. You cannot have both <em>DEFAULT</em> and <em>IDENTITY</em> for a column.</p> </body></html>