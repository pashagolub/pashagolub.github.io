<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p><a href="https://github.com/cybertec-postgresql/vip-manager" target="_blank" rel="noopener">vip-manager</a> has long been a crucial tool for managing virtual IPs in PostgreSQL HA setups, providing reliable leader routing. With the release of <a href="https://github.com/cybertec-postgresql/vip-manager/releases" target="_blank" rel="noopener">version 2.8.0</a>, we're taking things to the next level by introducing native integration with the Patroni <a href="https://patroni.readthedocs.io/en/latest/rest_api.html" target="_blank" rel="noopener">REST API</a>. This new feature adds flexibility and simplifies configuration, making it easier than ever to manage your PostgreSQL HA clusters.</p> <h2>Main Feature: Patroni REST API Integration</h2> <p>In this release, <code>vip-manager</code> can now directly interact with Patroni via its REST API. This integration removes the need for complex custom setups, enabling more dynamic and flexible management of virtual IPs.</p> <h3>What does this mean for you?</h3> <ul> <li> <strong>Native Integration</strong>: <code>vip-manager</code> now works seamlessly with Patroni clusters without additional configurations for <code>etcd</code> or <code>consul</code>.</li> <li> <strong>Huge Flexibility</strong>: The tool isn't limited to managing virtual IPs for primary nodes anymore; it can also handle replicas.</li> <li> <strong>Simplified Configuration</strong>: With default values in place (e.g., localhost for DCS endpoints), setting up <code>vip-manager</code> is quicker and easier than ever.</li> </ul> <h2>Example Usage of Patroni REST API</h2> <p>Here are a couple of examples to showcase the new feature:</p> <h3>Managing Virtual IP for the Primary Node</h3> <p>This command configures <code>vip-manager</code> to set up a virtual IP for the primary node:</p> <pre class="urvanov-syntax-highlighter-plain-tag">vip-manager --ip=10.0.0.42 --interface=eth0 \ 
--trigger-key="/leader" --trigger-value=200 --dcs-type=patroni</pre> <p><strong>What does it do?</strong></p> <ul> <li> <code>--ip=10.0.0.42</code>: The virtual IP to be managed.</li> <li> <code>--interface=eth0</code>: The network interface where vip-manager will set up the virtual IP.</li> <li> <code>--trigger-key="/leader"</code>: The endpoint in Patroni's REST API to check if the node is the leader.</li> <li> <code>--trigger-value=200</code>: The HTTP status code indicating success.</li> <li> <code>--dcs-type=patroni</code>: Specifies Patroni as the source of truth (the prefix <code>dcs</code> is still here due to historical reasons).</li> </ul> <p>If the current host is the leader, according to Patroni, the virtual IP will be assigned.</p> <h3>Managing Virtual IP for the Replica</h3> <p>This command configures <code>vip-manager</code> to manage a virtual IP for the replica node:</p> <pre class="urvanov-syntax-highlighter-plain-tag">vip-manager --ip=10.0.0.42 --interface=eth0 \
 --trigger-key="/asynchronous" --trigger-value=200 --dcs-type=patroni</pre> <p><strong>Key Notes:</strong></p> <ul> <li>No need to set <code>dcs-endpoints</code> if Patroni is running on localhost.</li> <li>Flexibility to manage virtual IPs for nodes other than the primary, like replicas.</li> </ul> <h2>Try it today!</h2> <p>If you want to contribute to <strong>vip-manager</strong> and help to make it better:</p> <ul> <li>‚≠ê<a href="https://github.com/cybertec-postgresql/vip-manager/stargazers" rel="external nofollow noopener" target="_blank">give a star</a> to the project,</li> <li>feel free to open an ????<a href="https://github.com/cybertec-postgresql/vip-manager/issues" rel="external nofollow noopener" target="_blank">issue</a> and ask a ????<a href="https://github.com/cybertec-postgresql/vip-manager/discussions" target="_blank" rel="noopener">question</a> </li> <li>or even consider submitting a ????<a href="https://github.com/cybertec-postgresql/vip-manager/pulls" target="_blank" rel="noopener">pull request</a>.</li> </ul> <p>In conclusion, I wish you all the best! Happy managing! ????????<br> See you soon in person at one of the <a href="https://www.postgresql.org/about/events/" target="_blank" rel="noopener noreferrer">conferences</a>, meetups, or <a href="/en/training/" target="_blank" rel="noopener noreferrer">training sessions!</a></p> <p>The post <a href="https://www.cybertec-postgresql.com/en/vip-manager-meets-patroni-rest-api/" rel="external nofollow noopener" target="_blank">vip-manager v2.8 meets Patroni REST API</a> appeared first on <a href="https://www.cybertec-postgresql.com/en" rel="external nofollow noopener" target="_blank">CYBERTEC PostgreSQL | Services &amp; Support</a>.</p> </body></html>